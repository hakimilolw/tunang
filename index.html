<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amirul & Aimi's Engagement Invitation</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts for a cutesy touch (Pacifico) and clean body (Inter) -->
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #ffffff; /* Pure white background for ultimate minimalism */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }
        .card {
            background-color: #ffffff; /* Solid white */
            border-radius: 20px; /* Slightly less rounded than before, still soft */
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05); /* Very subtle shadow */
            max-width: 550px; /* Slightly narrower card */
            width: 100%;
            padding: 40px 30px;
            text-align: center;
            animation: fadeIn 1s ease-out;
            border: 1px solid #f0f0f0; /* Very light gray border */
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .font-cutesy {
            font-family: 'Pacifico', cursive;
        }
        .text-soft-pink {
            color: #ff8fab; /* A soft, muted pink */
        }
        .text-dark-gray {
            color: #333333; /* Darker gray for readability */
        }
        .text-medium-gray {
            color: #666666; /* Medium gray for secondary text */
        }
        .button {
            display: inline-block;
            background-color: #ff8fab; /* Soft pink button */
            color: white;
            padding: 12px 28px;
            border-radius: 20px; /* Rounded button */
            text-decoration: none;
            font-weight: 500; /* Slightly lighter weight */
            margin-top: 25px;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 3px 8px rgba(255, 143, 171, 0.2); /* Very subtle pink shadow */
            letter-spacing: 0.2px;
            cursor: pointer; /* Indicate it's clickable */
        }
        .button:hover {
            background-color: #ff759f; /* Slightly darker pink on hover */
            transform: translateY(-1px);
            box-shadow: 0 5px 12px rgba(255, 143, 171, 0.3);
        }
        .button:active {
            transform: translateY(0);
            box-shadow: 0 2px 5px rgba(255, 143, 171, 0.1);
        }
        .info-box {
            background-color: #fffafa; /* Very light pink background for info */
            border-radius: 15px;
            padding: 25px;
            border: 1px solid #ffe8ed; /* Very light pink border */
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.02); /* Inner subtle shadow */
        }

        /* Modal specific styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.3); /* Semi-transparent overlay */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            background-color: #ffffff;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            max-width: 400px;
            width: 90%;
            text-align: center;
            position: relative;
            transform: translateY(-20px);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
        .modal-overlay.show .modal-content {
            transform: translateY(0);
            opacity: 1;
        }
        .modal-close-button {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #999;
            transition: color 0.2s ease;
        }
        .modal-close-button:hover {
            color: #333;
        }
        .modal-input {
            width: calc(100% - 20px);
            padding: 12px;
            margin-bottom: 20px;
            border: 1px solid #ddd;
            border-radius: 10px;
            font-size: 1rem;
            text-align: center;
            outline: none;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }
        .modal-input:focus {
            border-color: #ff8fab;
            box-shadow: 0 0 0 3px rgba(255, 143, 171, 0.2);
        }
        .modal-button {
            background-color: #ff8fab;
            color: white;
            padding: 12px 25px;
            border-radius: 15px;
            font-weight: 500;
            transition: background-color 0.3s ease, transform 0.2s ease;
            cursor: pointer;
            border: none; /* Remove default button border */
        }
        .modal-button:hover {
            background-color: #ff759f;
            transform: translateY(-1px);
        }
        .message-box {
            margin-top: 15px;
            padding: 10px;
            border-radius: 8px;
            font-size: 0.9rem;
            display: none; /* Hidden by default */
        }
        .message-box.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .message-box.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>
    <div class="card">
        <h1 class="text-dark-gray text-4xl sm:text-5xl font-cutesy mb-4">
            You're Invited!
        </h1>
        <p class="text-medium-gray text-base sm:text-lg mb-6">
            Join us as we celebrate the engagement of
        </p>

        <h2 class="text-soft-pink text-5xl sm:text-6xl font-cutesy mb-3">
            Amirul Hakimi
        </h2>
        <p class="text-dark-gray text-3xl sm:text-4xl font-cutesy mb-3">
            &
        </p>
        <h2 class="text-soft-pink text-5xl sm:text-6xl font-cutesy mb-8">
            Aimi Athirah
        </h2>

        <div class="info-box mb-8">
            <p class="text-dark-gray text-lg sm:text-xl font-medium mb-2">
                Date: <span class="text-soft-pink font-semibold">Friday, 20 September 2025</span>
            </p>
            <p class="text-dark-gray text-lg sm:text-xl font-medium mb-2">
                Time: <span class="text-soft-pink font-semibold">10:30 AM onwards</span>
            </p>
            <p class="text-dark-gray text-lg sm:text-xl font-medium">
                Venue: <span class="text-soft-pink font-semibold">Lot 1376, Jalan Dato Pemaisuri</span>
            </p>
        </div>

        <p class="text-medium-gray text-base sm:text-lg mb-6">
            Your presence would mean the world to us as we embark on this beautiful journey.
        </p>

        <div class="flex flex-col sm:flex-row justify-center items-center gap-4">
            <button id="rsvpButton" class="button">
                RSVP Now!
            </button>
            <a href="https://maps.google.com/?q=Lot+1376,+Jalan+Dato+Pemaisuri" target="_blank" class="button">
                View on Map
            </a>
        </div>

        <p class="text-medium-gray text-sm mt-8">
            With love,
            <br>
            Amirul & Aimi
        </p>
    </div>

    <!-- RSVP Modal -->
    <div id="rsvpModal" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close-button" id="closeModalButton">&times;</button>
            <h3 class="text-dark-gray text-2xl font-semibold mb-4">Confirm Your Attendance</h3>
            <p class="text-medium-gray mb-4">Please enter your name below:</p>
            <input type="text" id="guestNameInput" class="modal-input" placeholder="Your Full Name">
            <button id="sendRsvpButton" class="modal-button">Send RSVP</button>
            <div id="messageBox" class="message-box"></div>
        </div>
    </div>

    <script>
        // Get elements
        const rsvpButton = document.getElementById('rsvpButton');
        const rsvpModal = document.getElementById('rsvpModal');
        const closeModalButton = document.getElementById('closeModalButton');
        const sendRsvpButton = document.getElementById('sendRsvpButton');
        const guestNameInput = document.getElementById('guestNameInput');
        const messageBox = document.getElementById('messageBox');

        // IMPORTANT: This is the placeholder for your backend API endpoint.
        // You MUST set up a server-side application (e.g., Node.js, Python, PHP)
        // at this URL that will:
        // 1. Receive the POST request with the guest's name.
        // 2. Use the Telegram Bot API (https://core.telegram.org/bots/api)
        //    to send a message to your Telegram account.
        //    - Your Bot Token: 8104058263:AAFsFTuSslwL0zJBDT91NyS-4_1DIliUuo8
        //    - Your Chat ID: 675538113
        //    Example API call on your backend:
        //    `https://api.telegram.org/bot<YOUR_BOT_TOKEN>/sendMessage?chat_id=<YOUR_CHAT_ID>&text=New RSVP from: [Guest Name]`
        const TELEGRAM_BOT_API_ENDPOINT = 'https://your-backend-domain.com/api/send-rsvp'; // REPLACE THIS WITH YOUR ACTUAL BACKEND URL

        // Function to show message in modal
        function showMessage(message, type) {
            messageBox.textContent = message;
            messageBox.className = `message-box ${type}`; // Apply success or error class
            messageBox.style.display = 'block'; // Show the message box
        }

        // Function to hide message in modal
        function hideMessage() {
            messageBox.style.display = 'none'; // Hide the message box
            messageBox.textContent = '';
            messageBox.className = 'message-box'; // Reset classes
        }

        // Function to show modal
        function showModal() {
            rsvpModal.classList.add('show');
            guestNameInput.focus(); // Focus on input when modal opens
            hideMessage(); // Hide any previous messages
        }

        // Function to hide modal
        function hideModal() {
            rsvpModal.classList.remove('show');
            guestNameInput.value = ''; // Clear input field
            hideMessage(); // Hide any messages when closing
        }

        // Event listener for RSVP button click
        rsvpButton.addEventListener('click', showModal);

        // Event listener for close modal button click
        closeModalButton.addEventListener('click', hideModal);

        // Event listener for clicking outside the modal content to close it
        rsvpModal.addEventListener('click', (event) => {
            if (event.target === rsvpModal) {
                hideModal();
            }
        });

        // Event listener for sending RSVP
        sendRsvpButton.addEventListener('click', async () => {
            const guestName = guestNameInput.value.trim();

            if (guestName) {
                sendRsvpButton.disabled = true; // Disable button to prevent multiple submissions
                sendRsvpButton.textContent = 'Sending...';
                hideMessage(); // Hide previous messages

                try {
                    const response = await fetch(TELEGRAM_BOT_API_ENDPOINT, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        // Send the guestName to your backend
                        body: JSON.stringify({ guestName: guestName })
                    });

                    if (response.ok) {
                        showMessage('RSVP sent successfully! Thank you.', 'success');
                        // Optionally, you might want to auto-close the modal after a delay
                        setTimeout(hideModal, 3000);
                    } else {
                        // Attempt to parse error message from backend if available
                        const errorText = await response.text(); // Get raw text first
                        let errorMessage = 'Server error';
                        try {
                            const errorData = JSON.parse(errorText);
                            errorMessage = errorData.message || errorMessage;
                        } catch (parseError) {
                            // If it's not JSON, use the raw text
                            errorMessage = errorText || errorMessage;
                        }
                        showMessage(`Failed to send RSVP: ${errorMessage}`, 'error');
                    }
                } catch (error) {
                    console.error('Error sending RSVP:', error);
                    showMessage('An error occurred. Please try again later. (Check console for details)', 'error');
                } finally {
                    sendRsvpButton.disabled = false; // Re-enable button
                    sendRsvpButton.textContent = 'Send RSVP';
                }
            } else {
                showMessage('Please enter your name before sending the RSVP.', 'error');
            }
        });
    </script>
</body>
</html>
